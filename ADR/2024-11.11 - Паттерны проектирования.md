### Дата: 25 ноября 2024 г.

### Статус: Принято

### Контекст:

При проектировании микросервисной системы для поиска и бронирования туров (PER01-PER04, SCA01-SCA04, DUR01-DUR02, PRN01, PRN02), мы рассматриваем паттерны high load, которые помогут обеспечить высокую доступность, надежность, защиту данных, производительность, адаптивность и другие нефункциональные требования.

### Рассмотренные варианты:

1. Трёхзвенная структура
    
2. Кэширование
    
3. Толстый клиент
    
4. Деградация функциональности
    
5. Вертикальное масштабирование
    
6. Функциональное разделение
    
7. Горизонтальное масштабирование
    
8. SOA (Сервисно-ориентированная архитектура)
    
9. Монолитное приложение
    
10. Отложенные вычисления
    
11. Асинхронная обработка
    
12. Конвейер
    
13. Репликация
    
14. Вертикальный шардинг
    
15. Горизонтальный шардинг
    
16. Виртуальные шарды
    
17. Центральный диспетчер
    
18. Партиционирование
    
19. Денормализация
    
20. Введение избыточности
    
21. Параллельное выполнение
    
22. Специализированные сервера
    
23. Comet-сервер
    

### Решение:

Выбраны **Кэширование, Асинхронная обработка, Горизонтальное масштабирование, SOA, Деградация функциональности, Репликация, Горизонтальный шардинг и Функциональное разделение**.

### Обоснование:

#### **Кэширование**:

- **Повышение производительности и быстрая загрузка (PER02, PER04)**: Кэширование уменьшает нагрузку на бэкенд-сервисы, что позволяет быстрее отображать часто запрашиваемые данные.
    
- **Интеграция с различными платежными системами (NFR6)**: Кэширование результатов интеграции с платежными системами для повышения скорости обработки транзакций.
    
- **Снижение затрат на инфраструктуру (PRN01)**: Эффективное использование ресурсов сервера.
    

#### **Асинхронная обработка**:

- **Улучшение отклика и производительности (PER01, PER03)**: Обеспечивает мгновенный отклик на запросы пользователей и снижает пиковую нагрузку на серверы, распределяя обработку во времени.
    
- **Гибкость и адаптивность (SCA01, SCA02, NFR5)**: Легкое масштабирование компонентов системы и улучшение пользовательского опыта.
    
- **Система уведомлений (NFR7)**: Обработка уведомлений о статусе бронирования в фоновом режиме, что улучшает общую производительность системы.
    

#### **Горизонтальное масштабирование**:

- **Высокая доступность и надежность (SCA01-SCA04, DUR01)**: Обеспечивает отказоустойчивость за счет распределения нагрузки между несколькими узлами и позволяет добавлять новые серверы по мере роста нагрузки.
    
- **Масштабируемость (SCA01-SCA04)**: Позволяет легко масштабировать систему по мере увеличения числа пользователей и туроператоров.
    
- **Интеграция с различными платежными системами и защита данных (NFR2, NFR6)**: Улучшенная отказоустойчивость и безопасность за счет дублирования и распределения данных.
    

#### **SOA (Сервисно-ориентированная архитектура)**:

- **Гибкость в выборе технологий и интеграция (NFR6)**: Позволяет использовать различные технологии и легко интегрировать с внешними сервисами.
    
- **Масштабируемость и упрощение разработки (SCA01, SCA02)**: Компоненты могут разрабатываться и развертываться независимо, что ускоряет процесс разработки и позволяет быстрее вносить изменения.
    
- **Высокая надежность (DUR01, DUR02)**: Повышает отказоустойчивость системы за счет разделения на независимые сервисы.
    

#### **Деградация функциональности**:

- **Высокая доступность и надежность (SCA04, DUR01)**: Обеспечивает работу критически важных функций при возникновении сбоев, снижая риск полной недоступности системы.
    
- **Улучшение пользовательского опыта (PER01, PER04)**: Поддерживает основные функции системы даже при высоких нагрузках, что улучшает общее впечатление пользователей.
    

#### **Репликация**:

- **Высокая доступность и надежность (SCA01, DUR01)**: Дублирование данных на нескольких серверах повышает отказоустойчивость и надежность системы.
    
- **Защита данных (NFR2)**: Обеспечивает сохранность данных в случае сбоев или утрат.
    

#### **Горизонтальный шардинг**:

- **Масштабируемость и производительность (SCA01-SCA04)**: Разделение данных на небольшие части позволяет эффективно управлять большими объемами информации и улучшает производительность.
    
- **Улучшение отклика (PER02)**: Снижает нагрузку на отдельные узлы, что ускоряет доступ к данным и уменьшает время отклика.
    

#### **Функциональное разделение**:

- **Гибкость и упрощение разработки (SCA02, PRN01)**: Разделение системы на отдельные компоненты позволяет разработчикам сосредоточиться на конкретных задачах, что ускоряет процесс разработки.
    
- **Повышение надежности и масштабируемости (SCA01, DUR01)**: Компоненты могут развиваться независимо, что повышает надежность и позволяет легко масштабировать систему.
    

### Последствия:

- **Увеличение сложности системы**: Использование нескольких паттернов может усложнить архитектуру и потребовать дополнительных усилий для обеспечения их корректной работы.
    
- **Повышенные затраты на инфраструктуру**: Реализация высоконагруженной архитектуры требует дополнительных серверов и ресурсов для управления ими.
    
- **Необходимость в мониторинге и поддержке**: Постоянный мониторинг и поддержка для обеспечения надежности и производительности системы.
    

### Заключение:

Использование паттернов **Кэширование, Асинхронная обработка, Горизонтальное масштабирование, SOA, Деградация функциональности, Репликация, Горизонтальный шардинг и Функциональное разделение** позволит создать высокопроизводительную, масштабируемую и надежную систему поиска и бронирования туров, удовлетворяющую нефункциональные требования проекта. Эти паттерны помогут эффективно управлять нагрузкой, обеспечивать быстрый отклик и высокую доступность сервиса.